<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash å®¶å®½ä»£ç†é…ç½®ç”Ÿæˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .required {
            color: #e74c3c;
        }

        input,
        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: inherit;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .hint {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .advanced-toggle {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.3s;
        }

        .advanced-toggle:hover {
            background: #ebebeb;
        }

        .advanced-toggle span {
            font-weight: 500;
            color: #667eea;
        }

        .advanced-section {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .advanced-section.show {
            display: block;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-generate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-copy {
            background: #48bb78;
            color: white;
        }

        .btn-copy:hover {
            background: #38a169;
        }

        .btn-reset {
            background: #e0e0e0;
            color: #666;
        }

        .btn-reset:hover {
            background: #d0d0d0;
        }

        .output-section {
            margin-top: 30px;
            display: none;
        }

        .output-section.show {
            display: block;
        }

        .output-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .output-header h2 {
            color: #333;
            font-size: 18px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab {
            padding: 8px 16px;
            background: #f5f5f5;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            max-height: 500px;
            overflow-y: auto;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .preset-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .preset-btn {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .preset-btn:hover {
            background: #5568d3;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ  Clash å®¶å®½ä»£ç†é…ç½®ç”Ÿæˆå™¨</h1>
        <p class="subtitle">å¿«é€Ÿç”Ÿæˆæ‚¨çš„ä¸“å± Clash é¢„å¤„ç†è„šæœ¬</p>

        <!-- é¢„è®¾æ¨¡æ¿ -->
        <div class="preset-buttons">
            <button class="preset-btn" onclick="loadPreset('residential')">ğŸ“ ä½å®…ä»£ç†æ¨¡æ¿</button>
            <button class="preset-btn" onclick="loadPreset('datacenter')">ğŸ¢ æ•°æ®ä¸­å¿ƒæ¨¡æ¿</button>
            <button class="preset-btn" onclick="loadPreset('current')">âœ¨ å½“å‰é…ç½®</button>
        </div>

        <form id="configForm">
            <!-- åŸºç¡€é…ç½® -->
            <div class="form-group">
                <label>ä»£ç†åç§° <span class="required">*</span></label>
                <input type="text" id="proxyName" value="ğŸ  ç¾å›½ä½å®…ä»£ç†" required>
                <div class="hint">æ˜¾ç¤ºåœ¨èŠ‚ç‚¹åˆ—è¡¨ä¸­çš„åç§°ï¼Œå¯ä½¿ç”¨ emoji</div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>æœåŠ¡å™¨åœ°å€ <span class="required">*</span></label>
                    <input type="text" id="server" value="proxy.example.com" placeholder="ä¾‹å¦‚: 1.2.3.4" required>
                </div>
                <div class="form-group">
                    <label>ç«¯å£ <span class="required">*</span></label>
                    <input type="number" id="port" value="443" min="1" max="65535" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>ç”¨æˆ·å <span class="required">*</span></label>
                    <input type="text" id="username" value="your_username" required>
                </div>
                <div class="form-group">
                    <label>å¯†ç  <span class="required">*</span></label>
                    <input type="text" id="password" value="your_password" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>ä»£ç†ç±»å‹</label>
                    <select id="proxyType">
                        <option value="http">HTTP</option>
                        <option value="https">HTTPS</option>
                        <option value="socks5">SOCKS5</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å½±å­ç­–ç•¥ç»„åç§°</label>
                    <input type="text" id="relayGroupName" value="ğŸ‡ºğŸ‡¸ å®¶å®½å‰ç½®è·¯ç”±">
                </div>
            </div>

            <!-- é«˜çº§é…ç½® -->
            <div class="advanced-toggle" onclick="toggleAdvanced()">
                <span>âš™ï¸ é«˜çº§é…ç½®</span>
                <span id="advancedIcon">â–¼</span>
            </div>

            <div class="advanced-section" id="advancedSection">
                <div class="form-group">
                    <label>ç›®æ ‡ç­–ç•¥ç»„</label>
                    <input type="text" id="targetGroups"
                        value="Proxies, Netflix, AI, TikTok, DisneyPlus, HBO, YouTube, âœˆï¸Final">
                    <div class="hint">ç”¨é€—å·åˆ†éš”ï¼Œä¾‹å¦‚: Proxies, Netflix, AI</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="udp" checked> å¯ç”¨ UDP
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="tls"> å¯ç”¨ TLS
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="skipCertVerify" checked> è·³è¿‡è¯ä¹¦éªŒè¯
                    </label>
                    <div class="hint">ä¸å®‰å…¨çš„ç½‘ç»œç¯å¢ƒä¸‹å»ºè®®å¼€å¯</div>
                </div>

                <div class="form-group">
                    <label>è„šæœ¬ç‰ˆæœ¬</label>
                    <select id="scriptVersion">
                        <option value="full">å®Œæ•´ç‰ˆï¼ˆæ¨èï¼‰</option>
                        <option value="simple">ç²¾ç®€ç‰ˆ</option>
                    </select>
                </div>
            </div>

            <!-- æŒ‰é’®ç»„ -->
            <div class="button-group">
                <button type="button" class="btn-generate" onclick="generateConfig()">ğŸš€ ç”Ÿæˆé…ç½®</button>
                <button type="button" class="btn-copy" onclick="copyToClipboard()" id="copyBtn" disabled>ğŸ“‹
                    å¤åˆ¶ä»£ç </button>
                <button type="button" class="btn-reset" onclick="resetForm()">ğŸ”„ é‡ç½®</button>
            </div>
        </form>

        <!-- è¾“å‡ºåŒºåŸŸ -->
        <div class="output-section" id="outputSection">
            <div class="output-header">
                <h2>âœ¨ ç”Ÿæˆçš„é…ç½®è„šæœ¬</h2>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="switchTab('script')">JavaScript è„šæœ¬</div>
                <div class="tab" onclick="switchTab('yaml')">YAML é…ç½®ç¤ºä¾‹</div>
            </div>

            <div id="scriptTab">
                <pre class="code-block" id="outputCode"></pre>
            </div>

            <div id="yamlTab" style="display: none;">
                <pre class="code-block" id="yamlCode"></pre>
            </div>

            <div class="success-message" id="successMessage">
                âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'script';
        let generatedScript = '';

        // åˆ‡æ¢é«˜çº§é…ç½®
        function toggleAdvanced() {
            const section = document.getElementById('advancedSection');
            const icon = document.getElementById('advancedIcon');
            section.classList.toggle('show');
            icon.textContent = section.classList.contains('show') ? 'â–²' : 'â–¼';
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            document.getElementById('scriptTab').style.display = tab === 'script' ? 'block' : 'none';
            document.getElementById('yamlTab').style.display = tab === 'yaml' ? 'block' : 'none';
        }

        // åŠ è½½é¢„è®¾æ¨¡æ¿
        function loadPreset(type) {
            const presets = {
                residential: {
                    proxyName: 'ğŸ  ç¾å›½ä½å®…ä»£ç†',
                    server: 'proxy.example.com',
                    port: 443,
                    username: 'your_username',
                    password: 'your_password',
                    proxyType: 'http',
                    relayGroupName: 'ğŸ‡ºğŸ‡¸ å®¶å®½å‰ç½®è·¯ç”±'
                },
                datacenter: {
                    proxyName: 'ğŸ¢ æ•°æ®ä¸­å¿ƒä»£ç†',
                    server: '1.2.3.4',
                    port: 8080,
                    username: 'user',
                    password: 'pass',
                    proxyType: 'http',
                    relayGroupName: 'ğŸŒ æ•°æ®ä¸­å¿ƒå‰ç½®'
                },
                current: {
                    proxyName: 'ğŸ  ç¾å›½ä½å®…ä»£ç†',
                    server: 'proxy.example.com',
                    port: 443,
                    username: 'your_username',
                    password: 'your_password',
                    proxyType: 'http',
                    relayGroupName: 'ğŸ‡ºğŸ‡¸ å®¶å®½å‰ç½®è·¯ç”±'
                }
            };

            const preset = presets[type];
            if (preset) {
                Object.keys(preset).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = preset[key];
                });
            }
        }

        // ç”Ÿæˆé…ç½®
        function generateConfig() {
            const config = {
                proxyName: document.getElementById('proxyName').value,
                server: document.getElementById('server').value,
                port: parseInt(document.getElementById('port').value),
                username: document.getElementById('username').value,
                password: document.getElementById('password').value,
                proxyType: document.getElementById('proxyType').value,
                relayGroupName: document.getElementById('relayGroupName').value,
                targetGroups: document.getElementById('targetGroups').value.split(',').map(s => s.trim()),
                udp: document.getElementById('udp').checked,
                tls: document.getElementById('tls').checked,
                skipCertVerify: document.getElementById('skipCertVerify').checked,
                scriptVersion: document.getElementById('scriptVersion').value
            };

            // ç”Ÿæˆè„šæœ¬
            generatedScript = config.scriptVersion === 'full'
                ? generateFullScript(config)
                : generateSimpleScript(config);

            document.getElementById('outputCode').textContent = generatedScript;

            // ç”Ÿæˆ YAML ç¤ºä¾‹
            const yamlExample = generateYamlExample(config);
            document.getElementById('yamlCode').textContent = yamlExample;

            // æ˜¾ç¤ºè¾“å‡ºåŒºåŸŸ
            document.getElementById('outputSection').classList.add('show');
            document.getElementById('copyBtn').disabled = false;

            // æ»šåŠ¨åˆ°è¾“å‡ºåŒºåŸŸ
            document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ç”Ÿæˆå®Œæ•´ç‰ˆè„šæœ¬
        function generateFullScript(config) {
            const targetGroupsStr = config.targetGroups.map(g => `"${g}"`).join(', ');

            return `/**
 * Clash é…ç½®æ–‡ä»¶é¢„å¤„ç†è„šæœ¬ - å®¶å®½ä»£ç†å‰ç½®è·¯ç”±
 * ç‰ˆæœ¬: v1.0.0
 * ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}
 */

const main = (config) => {
  // ================= é…ç½®åŒºåŸŸ =================
  const CONFIG = {
    residentialProxy: {
      name: "${config.proxyName}",
      type: "${config.proxyType}",
      server: "${config.server}",
      port: ${config.port},
      username: "${config.username}",
      password: "${config.password}",
      udp: ${config.udp},
      tls: ${config.tls},
      skipCertVerify: ${config.skipCertVerify},
      dialerProxy: "${config.relayGroupName}"
    },
    relayGroupName: "${config.relayGroupName}",
    sourceGroupName: "Proxies",
    targetGroups: [${targetGroupsStr}],
    excludeNodes: ["DIRECT", "REJECT", "ğŸ¯Direct"]
  };

  // ================= æ—¥å¿—å‡½æ•° =================
  const log = {
    info: (msg) => console.log(\`âœ… \${msg}\`),
    warn: (msg) => console.log(\`âš ï¸  \${msg}\`),
    error: (msg) => console.error(\`âŒ \${msg}\`)
  };

  // ================= æ•°æ®æ ¡éªŒ =================
  if (!config || typeof config !== 'object') {
    log.error("é…ç½®å¯¹è±¡æ— æ•ˆ");
    return config;
  }

  if (!config.proxies) config.proxies = [];
  if (!config['proxy-groups']) config['proxy-groups'] = [];

  if (!Array.isArray(config.proxies) || !Array.isArray(config['proxy-groups'])) {
    log.error("proxies æˆ– proxy-groups æ ¼å¼é”™è¯¯");
    return config;
  }

  // ================= æ£€æŸ¥é‡å¤ =================
  const existingProxy = config.proxies.find(p => p.name === CONFIG.residentialProxy.name);
  if (existingProxy) {
    log.warn("å®¶å®½ä»£ç†å·²å­˜åœ¨ï¼Œè·³è¿‡æ·»åŠ ");
    return config;
  }

  // ================= æå–èŠ‚ç‚¹åˆ—è¡¨ =================
  const sourceGroup = config['proxy-groups'].find(g => g.name === CONFIG.sourceGroupName);
  if (!sourceGroup) {
    log.error(\`æ‰¾ä¸åˆ°æºç­–ç•¥ç»„: \${CONFIG.sourceGroupName}\`);
    return config;
  }

  if (!sourceGroup.proxies || !Array.isArray(sourceGroup.proxies)) {
    log.error(\`æºç­–ç•¥ç»„ \${CONFIG.sourceGroupName} æ²¡æœ‰æœ‰æ•ˆçš„ proxies å­—æ®µ\`);
    return config;
  }

  const excludeSet = new Set([...CONFIG.excludeNodes, CONFIG.residentialProxy.name]);
  const availableNodes = (sourceGroup.proxies || []).filter(p => !excludeSet.has(p));

  if (availableNodes.length === 0) {
    log.warn("æ²¡æœ‰å¯ç”¨çš„èŠ‚ç‚¹ï¼Œä»…æ·»åŠ  DIRECT é€‰é¡¹");
  }

  log.info(\`æå–åˆ° \${availableNodes.length} ä¸ªå¯ç”¨èŠ‚ç‚¹\`);

  // ================= åˆ›å»º/æ›´æ–°å½±å­ç­–ç•¥ç»„ =================
  const existingRelayGroup = config['proxy-groups'].find(g => g.name === CONFIG.relayGroupName);
  const relayGroup = {
    name: CONFIG.relayGroupName,
    type: "select",
    proxies: ["DIRECT", ...availableNodes]
  };

  if (existingRelayGroup) {
    log.warn("å½±å­ç­–ç•¥ç»„å·²å­˜åœ¨ï¼Œæ›´æ–°èŠ‚ç‚¹åˆ—è¡¨");
    Object.assign(existingRelayGroup, relayGroup);
  } else {
    config['proxy-groups'].unshift(relayGroup);
    log.info(\`åˆ›å»ºå½±å­ç­–ç•¥ç»„: \${CONFIG.relayGroupName}\`);
  }

  // ================= åˆ›å»ºå®¶å®½ä»£ç†èŠ‚ç‚¹ =================
  const residentialProxy = {
    name: CONFIG.residentialProxy.name,
    type: CONFIG.residentialProxy.type,
    server: CONFIG.residentialProxy.server,
    port: CONFIG.residentialProxy.port,
    username: CONFIG.residentialProxy.username,
    password: CONFIG.residentialProxy.password,
    udp: CONFIG.residentialProxy.udp,
    tls: CONFIG.residentialProxy.tls,
    "skip-cert-verify": CONFIG.residentialProxy.skipCertVerify,
    "dialer-proxy": CONFIG.residentialProxy.dialerProxy
  };

  config.proxies.unshift(residentialProxy);
  log.info(\`æ·»åŠ å®¶å®½ä»£ç†: \${CONFIG.residentialProxy.name}\`);

  // ================= æ·»åŠ åˆ°ç›®æ ‡ç­–ç•¥ç»„ =================
  const targetGroupSet = new Set(CONFIG.targetGroups);
  let addedCount = 0;

  config['proxy-groups'].forEach(group => {
    if (targetGroupSet.has(group.name)) {
      if (!group.proxies) group.proxies = [];
      if (!group.proxies.includes(residentialProxy.name)) {
        group.proxies.unshift(residentialProxy.name);
        addedCount++;
      }
    }
  });

  log.info(\`å·²å°†å®¶å®½ä»£ç†æ·»åŠ åˆ° \${addedCount} ä¸ªç­–ç•¥ç»„\`);

  // ================= å®Œæˆ =================
  log.info("é…ç½®å¤„ç†å®Œæˆ");
  log.info("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
  log.info("ğŸ“Œ ä½¿ç”¨æç¤º:");
  log.info("1. åœ¨ç­–ç•¥ç»„ä¸­é€‰æ‹© '${config.proxyName}'");
  log.info("2. åœ¨ '${config.relayGroupName}' ä¸­é€‰æ‹©å‰ç½®èŠ‚ç‚¹:");
  log.info("   - DIRECT: ç›´è¿ï¼ˆé»˜è®¤ï¼Œé€‚åˆå›½å†…è®¿é—®ï¼‰");
  log.info("   - å…¶ä»–èŠ‚ç‚¹: ä½¿ç”¨æœºåœºèŠ‚ç‚¹ä½œä¸ºå‰ç½®");
  log.info("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");

  return config;
};`;
        }

        // ç”Ÿæˆç²¾ç®€ç‰ˆè„šæœ¬
        function generateSimpleScript(config) {
            const targetGroupsStr = config.targetGroups.map(g => `"${g}"`).join(', ');

            return `/**
 * Clash å®¶å®½ä»£ç†å¤å†™é…ç½® - ç²¾ç®€ç‰ˆ
 * ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}
 */

const main = (config) => {
  const PROXY_NAME = "${config.proxyName}";
  const RELAY_NAME = "${config.relayGroupName}";
  
  const residentialProxy = {
    name: PROXY_NAME,
    type: "${config.proxyType}",
    server: "${config.server}",
    port: ${config.port},
    username: "${config.username}",
    password: "${config.password}",
    udp: ${config.udp},
    tls: ${config.tls},
    "skip-cert-verify": ${config.skipCertVerify},
    "dialer-proxy": RELAY_NAME
  };
  
  const targetGroups = [${targetGroupsStr}];

  if (!config.proxies) config.proxies = [];
  if (!config['proxy-groups']) config['proxy-groups'] = [];
  
  if (config.proxies.some(p => p.name === PROXY_NAME)) {
    console.log("âš ï¸ å·²å­˜åœ¨ï¼Œè·³è¿‡");
    return config;
  }
  
  const sourceGroup = config['proxy-groups'].find(g => g.name === "Proxies");
  if (!sourceGroup) {
    console.error("âŒ æ‰¾ä¸åˆ° Proxies ç»„");
    return config;
  }
  
  const availableNodes = (sourceGroup.proxies || []).filter(
    p => !["DIRECT", "REJECT", "ğŸ¯Direct", PROXY_NAME].includes(p)
  );
  
  const relayGroup = {
    name: RELAY_NAME,
    type: "select",
    proxies: ["DIRECT", ...availableNodes]
  };
  
  config['proxy-groups'].unshift(relayGroup);
  config.proxies.unshift(residentialProxy);
  
  config['proxy-groups'].forEach(group => {
    if (targetGroups.includes(group.name)) {
      if (!group.proxies) group.proxies = [];
      if (!group.proxies.includes(PROXY_NAME)) {
        group.proxies.unshift(PROXY_NAME);
      }
    }
  });
  
  console.log("âœ… é…ç½®å®Œæˆ");
  return config;
};`;
        }

        // ç”Ÿæˆ YAML é…ç½®ç¤ºä¾‹
        function generateYamlExample(config) {
            const targetGroupsStr = config.targetGroups.map(g => `    - ${g}`).join('\n');

            return `# Clash é…ç½®æ–‡ä»¶ä¸­çš„ Parsers é…ç½®ç¤ºä¾‹
# å°†æ­¤é…ç½®æ·»åŠ åˆ°æ‚¨çš„ Clash é…ç½®æ–‡ä»¶ä¸­

parsers:
  - url: https://ä½ çš„è®¢é˜…é“¾æ¥
    code: |
      # åœ¨è¿™é‡Œç²˜è´´ä¸Šæ–¹ç”Ÿæˆçš„ JavaScript è„šæœ¬å®Œæ•´å†…å®¹

# ============================================
# æˆ–è€…ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶æ–¹å¼:
# ============================================

parsers:
  - url: https://ä½ çš„è®¢é˜…é“¾æ¥
    file: /path/to/your/script.js

# ============================================
# ç”Ÿæˆçš„ä»£ç†é…ç½®é¢„è§ˆ:
# ============================================

proxies:
  - name: ${config.proxyName}
    type: ${config.proxyType}
    server: ${config.server}
    port: ${config.port}
    username: ${config.username}
    password: ${config.password}
    udp: ${config.udp}
    tls: ${config.tls}
    skip-cert-verify: ${config.skipCertVerify}
    dialer-proxy: ${config.relayGroupName}

proxy-groups:
  - name: ${config.relayGroupName}
    type: select
    proxies:
      - DIRECT
      - # ... å…¶ä»–æœºåœºèŠ‚ç‚¹

  # ç›®æ ‡ç­–ç•¥ç»„ï¼ˆä¼šè‡ªåŠ¨æ·»åŠ å®¶å®½ä»£ç†ï¼‰:
${targetGroupsStr}`;
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        function copyToClipboard() {
            const textToCopy = currentTab === 'script'
                ? generatedScript
                : document.getElementById('yamlCode').textContent;

            navigator.clipboard.writeText(textToCopy).then(() => {
                const successMsg = document.getElementById('successMessage');
                successMsg.classList.add('show');

                setTimeout(() => {
                    successMsg.classList.remove('show');
                }, 3000);
            }).catch(err => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            });
        }

        // é‡ç½®è¡¨å•
        function resetForm() {
            document.getElementById('configForm').reset();
            loadPreset('current');
            document.getElementById('outputSection').classList.remove('show');
            document.getElementById('copyBtn').disabled = true;
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function () {
            loadPreset('current');
        };
    </script>
</body>

</html>